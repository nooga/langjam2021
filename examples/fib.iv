// This returns (fib 9) in a funny way

def zero? n = n == 0
def one? n = n == 1
def addOne = (+ 1) 

op <+> 20 left
def (<+>) a b = 2 * a + b

def y = 3
def x = y <+> 1 * 2

def twice f = f @ f

def fib n 
    | zero? n = 0
    | one? n  = 1
    | else    = fib (n - 1) + fib (n - 2)

x |> twice addOne |> fib